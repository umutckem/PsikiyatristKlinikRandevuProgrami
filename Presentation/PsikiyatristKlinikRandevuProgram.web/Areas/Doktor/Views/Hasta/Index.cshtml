@model List<PsikiyatristKlinikRandevuProgrami.Core.Model.Kullanici>

@section Styles {
    <style>
        .fade-in {
            animation: fadeIn 0.7s ease-in;
        }

        @@keyframes fadeIn {
            from

        {
            opacity: 0;
            transform: translateY(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }

        }

        .table-hover tbody tr:hover {
            background-color: #f1f5ff;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #searchInput {
            max-width: 300px;
        }
    </style>
}

<div class="container py-5 fade-in">
    <div class="card shadow-lg border-0 rounded-4">
        <div class="card-header bg-primary text-white rounded-top-4 d-flex justify-content-between align-items-center p-4 flex-wrap gap-2">
            <div>
                <h3 class="mb-0"><i class="bi bi-people-fill me-2"></i>Hastalar</h3>
                <small class="text-white-50">Size atanan hastaların listesini buradan görebilirsiniz.</small>
            </div>
            <div class="d-flex gap-2 flex-wrap">
                <input type="text" id="searchInput" class="form-control rounded-pill" placeholder="Hasta ara...">
                <a href="javascript:history.back()" class="btn btn-outline-light rounded-pill px-4">
                    <i class="bi bi-arrow-left-circle me-1"></i> Geri Dön
                </a>
            </div>
        </div>
        <div class="card-body p-4">
            @if (Model != null && Model.Any())
            {
                <div class="table-responsive">
                    <table id="hastaTable" class="table table-hover table-striped align-middle text-center">
                        <thead class="table-dark">
                            <tr>
                                <th>#</th>
                                <th>Ad Soyad</th>
                                <th>Doğum Tarihi</th>
                                <th>Cinsiyet</th>
                                <th>Sigorta Durumu</th>
                                <th>Adres</th>
                            </tr>
                        </thead>
                        <tbody>
                            @for (int i = 0; i < Model.Count; i++)
                            {
                                <tr>
                                    <td>@(i + 1)</td>
                                    <td>@Model[i].Ad @Model[i].Soyad</td>
                                    <td>@Model[i].DogumTarihi.ToString("yyyy-MM-dd")</td>
                                    <td>@Model[i].Cinsiyet</td>
                                    <td>@Model[i].SigortaDurumu</td>
                                    <td>@Model[i].Adres</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            }
            else
            {
                <div class="alert alert-warning text-center p-4">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i> Hiç hasta kaydı bulunamadı.
                </div>
            }
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.getElementById("searchInput").addEventListener("keyup", function () {
            var input = this.value.toLowerCase();
            var rows = document.querySelectorAll("#hastaTable tbody tr");

            rows.forEach(function (row) {
                var text = row.innerText.toLowerCase();
                row.style.display = text.includes(input) ? "" : "none";
            });
        });
    </script>
}
